"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DeviceCache = void 0;
const expect = require("@fantasticfiasco/expect");
const logging_1 = require("../logging");
class DeviceCache {
    constructor(...devices) {
        this.devices = {};
        for (const device of devices) {
            this.devices[device.macAddress] = device;
        }
    }
    update(device) {
        expect.toExist(device.macAddress, `MAC address of device with address ${device.address} is expected`);
        let hit = this.devices[device.macAddress];
        if (hit) {
            logging_1.log('DeviceCache#update - hit for %s [%s]', device.address, device.macAddress);
            hit = Object.assign(hit, device);
        }
        else {
            logging_1.log('DeviceCache#update - miss for %s [%s]', device.address, device.macAddress);
            hit = device;
        }
        this.devices[device.macAddress] = hit;
        return hit;
    }
}
exports.DeviceCache = DeviceCache;
//# sourceMappingURL=DeviceCache.js.map